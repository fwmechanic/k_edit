#!/bin/bash
dnm='.kbackup'
dinpath='*/'"$dnm"'/*'
show() (
   dct="$(find . -type d -name "$dnm" | wc -l)"
   fct="$(find . -path "$dinpath" -type f | wc -l)"
   echo "$1 $fct files in $dct $dnm dirs"
   )
dlist() (
   find . -type d -name "$dnm" | LC_ALL=C sort
   )
list() (
   find . -path "$dinpath" -type f | LC_ALL=C sort -i
   )
case "$1" in
   rmall)    show "deleting" ;
             find . -type d -name "$dnm" -exec rm -r {} +
           ;;
   dlist)     dlist
           ;;
   list)     list
           ;;
   *)        show "there are"
             echo "  list   to list all files"
             echo "  rmall  to delete all files/dirs"
           ;;
esac
